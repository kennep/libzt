pool:
  vmImage: 'Ubuntu 18.04'

steps:
  - script: |
      make update
      make patch
    displayName: Prepare
  - script: |
      make host_debug
      cp lib/debug/linux-x86_64/libzt.a $(Build.ArtifactStagingDirectory)/linux-x86_64-debug-libzt.a
    displayName: Build Debug Version
  - script: |
      make host
      cp lib/release/linux-x86_64/libzt.a $(Build.ArtifactStagingDirectory)/linux-x86_64-release-libzt.a
    displayName: Build Release Version
  - task: GitHubRelease@0
    displayName: Upload GitHub Release
    inputs:
      gitHubConnection: github
      tagSource: manual
      tag: 1.3.1.2
 

